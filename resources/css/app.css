@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        @apply bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100;
        overflow-x: hidden;
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    .app-container {
        @apply relative min-h-screen w-full;
    }

    /* Dark mode transitions */
    * {
        @apply transition-colors duration-300;
    }
}

@layer components {
    /* ============================================
       GRADIENT BACKGROUNDS
       ============================================ */
    .bg-gradient-primary {
        @apply bg-gradient-to-br from-blue-50 via-white to-blue-50;
        @apply dark:from-gray-900 dark:via-gray-800 dark:to-gray-900;
        min-height: 100vh;
    }

    /* ============================================
       GLASS EFFECTS
       ============================================ */
    .glass-effect {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        @apply border border-white/20 dark:border-gray-700/20;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
    
    .dark .glass-effect {
        background: rgba(31, 41, 55, 0.95);
    }

    .panel-glass {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        @apply border border-white/30 dark:border-gray-700/30;
        @apply shadow-lg;
    }
    
    .dark .panel-glass {
        background: rgba(31, 41, 55, 0.98);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    }

    /* ============================================
       BUTTONS
       ============================================ */
    .btn-primary {
        @apply bg-blue-500 hover:bg-blue-600 active:bg-blue-700;
        @apply dark:bg-blue-600 dark:hover:bg-blue-700 dark:active:bg-blue-800;
        @apply text-white px-6 py-3 rounded-full font-medium;
        @apply transition-all duration-300 hover:scale-105 hover:shadow-lg;
    }

    .btn-secondary {
        @apply bg-white/20 hover:bg-white/30 dark:bg-gray-700/20 dark:hover:bg-gray-700/30;
        @apply text-gray-900 dark:text-white px-4 py-2 rounded-full font-medium;
        @apply transition-all duration-300 backdrop-blur-sm;
        @apply border border-white/20 dark:border-gray-600/20;
    }

    .btn-danger {
        @apply bg-red-600 hover:bg-red-700 active:bg-red-800;
        @apply dark:bg-red-700 dark:hover:bg-red-800 dark:active:bg-red-900;
        @apply text-white px-6 py-3 rounded-lg font-medium;
        @apply transition-all duration-300 hover:shadow-lg;
    }

    /* ============================================
       INPUTS
       ============================================ */
    .input-primary {
        @apply px-4 py-3 border-2 border-blue-500/30 dark:border-blue-400/30;
        @apply rounded-full outline-none text-sm min-w-64;
        @apply bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm;
        @apply focus:border-blue-500 dark:focus:border-blue-400;
        @apply focus:ring-2 focus:ring-blue-500/20 dark:focus:ring-blue-400/20;
        @apply transition-all duration-300;
        @apply text-gray-900 dark:text-gray-100;
        @apply placeholder:text-gray-500 dark:placeholder:text-gray-400;
    }

    .input-standard {
        @apply w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600;
        @apply rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400;
        @apply focus:border-blue-500 dark:focus:border-blue-400;
        @apply bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100;
        @apply transition-colors;
    }

    /* ============================================
       CARDS
       ============================================ */
    .card {
        @apply bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm;
        @apply rounded-2xl p-6 shadow-xl dark:shadow-gray-900/50;
        @apply border border-white/20 dark:border-gray-700/20;
    }

    .weather-card {
        @apply bg-gradient-to-br from-gray-50 to-gray-100;
        @apply dark:from-gray-800 dark:to-gray-700;
        @apply border border-blue-200/20 dark:border-blue-500/20;
        @apply transition-all duration-300;
    }

    .weather-card:hover {
        @apply transform -translate-y-1 shadow-xl dark:shadow-gray-900/50;
    }

    .current-weather-card {
        min-height: 168px !important;
        height: 168px !important;
        @apply flex flex-col justify-between;
    }

    .metric-card-compact {
        @apply bg-blue-100/50 dark:bg-blue-900/30;
        @apply border border-blue-200 dark:border-blue-700;
        @apply rounded-lg p-3 text-center;
        @apply transition-all duration-300;
    }

    .metric-card-compact:hover {
        @apply bg-blue-100 dark:bg-blue-900/50 transform -translate-y-0.5;
    }

    /* ============================================
       WEATHER SPECIFIC CARDS
       ============================================ */
    .altitude-card {
        @apply bg-gradient-to-br from-green-500 to-green-600;
        @apply dark:from-green-600 dark:to-green-700;
        @apply text-white;
    }

    .soil-card {
        @apply bg-gradient-to-br from-orange-500 to-orange-600;
        @apply dark:from-orange-600 dark:to-orange-700;
        @apply text-white;
    }

    /* ============================================
       DATA CARDS
       ============================================ */
    .data-card-uniform {
        min-height: 80px;
        height: 80px;
        @apply p-3 rounded-lg flex flex-col justify-center items-center;
        @apply text-center transition-all duration-300;
    }

    .metric-value-compact {
        @apply text-xl font-bold text-blue-700 dark:text-blue-300;
    }

    .metric-label-compact {
        @apply text-xs text-gray-600 dark:text-gray-400 mt-1;
    }

    /* ============================================
       FORECAST ITEMS
       ============================================ */
    .forecast-item {
        @apply flex items-center justify-between p-3 rounded-xl;
        @apply bg-gray-50/80 dark:bg-gray-700/80;
        @apply border border-gray-200/50 dark:border-gray-600/50;
        @apply mb-2 transition-all duration-300;
    }

    .forecast-item:hover {
        @apply bg-gray-100 dark:bg-gray-700 transform translate-x-1;
    }

    /* ============================================
       POI ITEMS
       ============================================ */
    .poi-item {
        @apply bg-gradient-to-r from-blue-50 to-indigo-50;
        @apply dark:from-blue-900/30 dark:to-indigo-900/30;
        @apply p-4 rounded-xl cursor-pointer;
        @apply transition-all duration-300;
        @apply hover:from-blue-100 hover:to-indigo-100;
        @apply dark:hover:from-blue-900/50 dark:hover:to-indigo-900/50;
        @apply hover:scale-105 hover:shadow-md;
        @apply border border-blue-100 dark:border-blue-800;
    }

    /* ============================================
       SECTION HEADERS
       ============================================ */
    .section-header {
        @apply text-xl font-bold text-gray-800 dark:text-gray-100;
        @apply mb-4 pb-2 border-b-2 border-blue-500 dark:border-blue-400;
    }

    /* ============================================
       OVERLAYS
       ============================================ */
    .overlay {
        z-index: 9999 !important;
    }

    /* ============================================
       SIDEBAR
       ============================================ */
    .sidebar-overlay {
        @apply transition-opacity duration-300 ease-in-out;
    }
    
    .sidebar-menu {
        @apply transition-transform duration-300 ease-in-out;
        @apply bg-white dark:bg-gray-800;
        @apply border-gray-200 dark:border-gray-700;
    }
    
    @media (max-width: 1024px) {
        .sidebar-menu {
            transform: translateX(-100%);
        }
        
        .sidebar-menu.open {
            transform: translateX(0);
        }
    }

    /* ============================================
       SEARCH & AUTOCOMPLETE
       ============================================ */
    .search-container {
        @apply relative z-[1000];
    }

    .autocomplete-dropdown {
        @apply shadow-2xl border border-blue-100 dark:border-blue-900;
        @apply bg-white/95 dark:bg-gray-800/95;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }

    .autocomplete-item {
        @apply transition-all duration-200;
        @apply hover:bg-gradient-to-r hover:from-blue-50 hover:to-blue-100;
        @apply dark:hover:from-blue-900/30 dark:hover:to-blue-800/30;
    }

    .autocomplete-item:hover {
        @apply transform translate-x-0.5;
    }

    .autocomplete-item.selected {
        @apply bg-gradient-to-r from-blue-500 to-blue-600;
        @apply dark:from-blue-600 dark:to-blue-700;
        @apply text-white transform translate-x-0.5;
    }

    /* ============================================
       SCROLLBARS
       ============================================ */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        @apply bg-gray-100 dark:bg-gray-800 rounded-xl;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        @apply bg-blue-500/50 dark:bg-blue-400/50 rounded-xl;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        @apply bg-blue-500/70 dark:bg-blue-400/70;
    }

    .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: rgba(59, 130, 246, 0.5) rgba(0, 0, 0, 0.1);
    }

    .custom-scrollbar-thin::-webkit-scrollbar {
        width: 4px;
        height: 4px;
    }

    .custom-scrollbar-thin::-webkit-scrollbar-track {
        @apply bg-gray-100/50 dark:bg-gray-800/50 rounded;
    }

    .custom-scrollbar-thin::-webkit-scrollbar-thumb {
        @apply bg-blue-500/30 dark:bg-blue-400/30 rounded;
    }

    .custom-scrollbar-thin::-webkit-scrollbar-thumb:hover {
        @apply bg-blue-500/50 dark:bg-blue-400/50;
    }

    /* ============================================
       MENU & DROPDOWN
       ============================================ */
    .menu-content {
        transform: translateY(-10px);
        opacity: 0;
        visibility: hidden;
        @apply transition-all duration-300 ease-in-out;
    }

    details[open] .menu-content {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
    }

    /* ============================================
       LOADING STATES
       ============================================ */
    .loading-shimmer {
        @apply bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200;
        @apply dark:from-gray-700 dark:via-gray-600 dark:to-gray-700;
        background-size: 200% 100%;
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        0% {
            background-position: 200% 0;
        }
        100% {
            background-position: -200% 0;
        }
    }

    .weather-loading {
        @apply relative overflow-hidden;
    }

    .weather-loading::after {
        content: '';
        @apply absolute top-0 left-0 w-full h-full;
        background: linear-gradient(
            90deg,
            transparent,
            rgba(255, 255, 255, 0.4),
            transparent
        );
        animation: shimmer 1.5s infinite;
        transform: translateX(-100%);
    }

    /* ============================================
       WEATHER LAYERS
       ============================================ */
    .weather-layer-toggle:checked + div {
        @apply bg-blue-500 dark:bg-blue-600;
    }

    .weather-layer-toggle:checked + div .dot {
        transform: translateX(100%);
    }

    .weather-layer-toggle + div {
        @apply relative w-10 h-6 bg-gray-300 dark:bg-gray-600;
        @apply rounded-full transition-colors duration-300 cursor-pointer;
    }

    .weather-layer-toggle + div .dot {
        @apply absolute top-0.5 left-0.5 w-5 h-5;
        @apply bg-white rounded-full shadow-md;
        @apply transition-transform duration-300;
    }

    /* Weather Tooltips */
    .temp-tooltip {
        @apply bg-gray-900 dark:bg-gray-800 text-white;
        @apply border-0 rounded-md font-semibold text-xs px-2 py-1;
    }

    .precip-tooltip {
        @apply bg-blue-600 dark:bg-blue-700 text-white;
        @apply border-0 rounded-md font-semibold text-xs px-2 py-1;
    }

    /* Temperature Layer Classes */
    .temp-cold {
        background: radial-gradient(circle, rgba(59, 130, 246, 0.7) 0%, rgba(59, 130, 246, 0.2) 70%, transparent 100%) !important;
        animation: tempGlow 3s ease-in-out infinite;
    }

    .temp-cool {
        background: radial-gradient(circle, rgba(34, 197, 94, 0.7) 0%, rgba(34, 197, 94, 0.2) 70%, transparent 100%) !important;
        animation: tempGlow 3s ease-in-out infinite;
    }

    .temp-warm {
        background: radial-gradient(circle, rgba(251, 191, 36, 0.7) 0%, rgba(251, 191, 36, 0.2) 70%, transparent 100%) !important;
        animation: tempGlow 3s ease-in-out infinite;
    }

    .temp-hot {
        background: radial-gradient(circle, rgba(239, 68, 68, 0.7) 0%, rgba(239, 68, 68, 0.2) 70%, transparent 100%) !important;
        animation: tempGlow 3s ease-in-out infinite;
    }

    @keyframes tempGlow {
        0%, 100% { 
            transform: scale(1); 
            opacity: 0.7; 
        }
        50% { 
            transform: scale(1.1); 
            opacity: 0.9; 
        }
    }

    /* Precipitation Layers */
    .precip-light {
        background: radial-gradient(circle, rgba(34, 197, 94, 0.6) 0%, rgba(34, 197, 94, 0.1) 80%, transparent 100%) !important;
        animation: precipFall 2s linear infinite;
    }

    .precip-moderate {
        background: radial-gradient(circle, rgba(251, 191, 36, 0.7) 0%, rgba(251, 191, 36, 0.2) 80%, transparent 100%) !important;
        animation: precipFall 1.5s linear infinite;
    }

    .precip-heavy {
        background: radial-gradient(circle, rgba(239, 68, 68, 0.8) 0%, rgba(239, 68, 68, 0.3) 80%, transparent 100%) !important;
        animation: precipFall 1s linear infinite;
    }

    @keyframes precipFall {
        0% { opacity: 0.3; }
        50% { opacity: 0.8; }
        100% { opacity: 0.3; }
    }

    /* Wind Arrows */
    .wind-arrow {
        @apply absolute pointer-events-none z-[1000];
        animation: windPulse 2s ease-in-out infinite;
    }

    .wind-arrow div {
        @apply text-blue-800 dark:text-blue-300 font-bold;
        filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.8));
        @apply transition-all duration-300;
    }

    @keyframes windPulse {
        0%, 100% { opacity: 0.8; }
        50% { opacity: 1; }
    }

    /* ============================================
       NOTIFICATIONS
       ============================================ */
    @keyframes slideInRight {
        from {
            transform: translateX(400px);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .notification-enter {
        animation: slideInRight 0.3s ease-out;
    }

    @keyframes slideInFromBottom {
        0% {
            transform: translateY(100px);
            opacity: 0;
        }
        100% {
            transform: translateY(0);
            opacity: 1;
        }
    }

    /* ============================================
       PROFILE & DASHBOARD SPECIFIC
       ============================================ */
    .stat-card {
        @apply bg-white dark:bg-gray-800 rounded-xl shadow-sm;
        @apply p-6 border border-gray-100 dark:border-gray-700;
        @apply transition-all duration-300 hover:shadow-md;
    }

    .quick-action-card {
        @apply flex items-start gap-4 p-4 rounded-xl;
        @apply border-2 border-gray-200 dark:border-gray-700;
        @apply hover:border-blue-400 dark:hover:border-blue-500;
        @apply hover:bg-blue-50 dark:hover:bg-blue-900/20;
        @apply transition-all duration-300;
    }

    .quick-action-card:hover {
        @apply transform -translate-y-0.5;
    }

    /* ============================================
       RESPONSIVE UTILITIES
       ============================================ */
    @media (max-width: 1024px) {
        .h-\[66\%\] {
            height: auto;
            min-height: 400px;
        }

        .h-\[33\%\] {
            height: auto;
            min-height: 300px;
        }
    }

    @media (max-width: 768px) {
        .current-weather-card {
            min-height: 148px !important;
            height: 148px !important;
        }

        .data-card-uniform {
            min-height: 70px;
            height: 70px;
            @apply p-2;
        }

        .metric-value-compact {
            @apply text-base;
        }

        .metric-label-compact {
            @apply text-[0.625rem];
        }
    }

    @media (max-width: 480px) {
        .current-weather-card {
            min-height: 128px !important;
            height: 128px !important;
        }

        .data-card-uniform {
            min-height: 60px;
            height: 60px;
            @apply p-1.5;
        }
    }
}

@layer utilities {
    /* Dark mode toggle utilities */
    .dark-mode-transition {
        @apply transition-colors duration-300 ease-in-out;
    }

    /* Touch device optimizations */
    @media (hover: none) and (pointer: coarse) {
        .touch-target {
            min-height: 44px;
        }
    }
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .wind-arrow,
    .temp-cold,
    .temp-cool,
    .temp-warm,
    .temp-hot,
    .precip-light,
    .precip-moderate,
    .precip-heavy {
        animation: none;
    }
}

/* ============================================
   HIGH CONTRAST MODE SUPPORT
   ============================================ */
@media (prefers-contrast: high) {
    .temp-tooltip,
    .precip-tooltip {
        @apply bg-black text-white border-2 border-white;
    }

    .wind-arrow div {
        @apply text-black;
        filter: drop-shadow(0 0 2px #ffffff);
    }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
    .overlay,
    aside,
    nav,
    footer,
    button,
    .no-print {
        display: none !important;
    }

    body {
        @apply bg-white text-black;
    }

    .panel-glass,
    .card {
        @apply border border-gray-300 shadow-none;
        page-break-inside: avoid;
    }
}